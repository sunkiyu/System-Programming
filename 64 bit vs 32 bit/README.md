참조 : 뇌를 자극하는 윈도우즈 시스템 프로그래밍    

# 64 bit vs 32 bit
* cpu는 I/O 버스를 통해 데이터를 외부/내부로 전송 수송함   
* 이 때 한번에 전송 및 수신 할 수 있는 데이터의 크기에 따라 32비트, 64비트 시스템으로 나뉨   
* 또 하나의 기준은 데이터를 한번에 몇 비트 처리할 수 있는가?를 나타냄   
* 즉, 한 번에 송수신 할 수 있는 데이터의 크기와 한 번에 처리할 수 있는 데이터 크기를 기준으로 64비트 32 비트 컴퓨터를 구분 지음   

### 프로그래머 입장의 64비트 컴퓨터
* 프로그래머 입장에서는 표현할 수 있는 주소값의 범위가 넓을수록 더 넓은 메모리 공간을 활용 가능하기 때문에 좋다.(메모리 공간이 충분하다는 가정하에)   
* 예를 들어 메모리는 1GB 인데 주소값을 표현하기 위해 4비트가 사용된다면 메모리에 할당할 수 있는 주소값의 개수는 2의 4승인 16개, 16바이트가 된다.    
* 그럼 사용 가능한 최대 메모리 크기는 16바이트다.   

## Q & A
* 내부 메모리에 해당하는 램에 주소가 정해져 있나?   
=> 메인 메모리인 램에 주소가 붙은게 아니라 운영체제에서 프로그램 실행을 위해 편의상 붙여놓은 가상 주소이다.(가상 메모리 주소)    

* 주소값을 표현하기 위해 4비트를 사용했다는 것은 무슨 뜻인가?   
=> 0000~1111까지 2진수로 표현 가능하다는 것, 많은 비트수를 활용해서 주소를 표현할수록, 표현할 수 있는 주소값의 범위는 더 넓어짐. 그만큼 활용 가능한 메모리 크기도 커진다.   

* 내 컴퓨터의 램이 256MB 인데 어떻게 4GB를 할당하는가?    
=> 주소값은 4G까지 표현되는데 램은 256MB가 전부다. 그래도 Windows는 잉를 허용한다.(가상 메모리)   

## 프로그램 구현 관점에서의 WIN32 vs WIN64
* LLP64 vs LP64
* 지금까지 int, long,포인터 모두 4바이트로 표현   
* 64비트 컴퓨터에서는 다음과 같이 표현   
* windows에서는 포인터만 8바이트로 표현되는데, 그래서 32비트 시스템과 호환성을 중시한 모델이라 한다.   
 
## 64비트와 32비트 공존의 문제점
* 32비트 시스템은 포인터를 int,long 등 4바이트 정수형에 형변환해서 담는 행위를 해도 문제되지 않았지만, 64비트에서는 포인터의 사이즈가 8바이트이기 때문에    
* 형변환 과정에서 데이터 손실이 발생할 수 있다.   
* 64비트 시스템에서는 포인터가 지니고 있는 주소값을 4바이트 정수형으로 형변환 말자   

## Windows 스타일의 자료형
* polymorphic 자료형    
* 다형적이란? -> 하나의 대상이 보는 관점에 따라 다양한 의미 혹은 상태를 지님    
* 자료형의 다형적? -> 상황과 환경에 따라 그 자료형이 의미하는 바가 유동적   
* PTR이 붙어 있다고 해서 포인터라고 생각할 수 있지만 포인터가 아님    
* 포인터 값 기반의 산술연산을 위해 정의된 자료형 이기 때문에 PTR이 붙은 것.    
* 32비트, 64비트 시스템의 포인터 정밀도(포인터 크기)가 다르기 때문에 발생할 수 있는 문제를 해결하기 위해 등장    
* 32비트 시스템에서는 32비트로, 64비트 시스템에서는 64비트로 선언됨   

```cpp
#if defined (_WIN64)
    typedef __int64    LONG_PTR;
    typedef unsigned __int64    ULONG_PTR;
 
    typedef __int64 INT_PTR;
    typedef unsigned __int64 UINT_PTR;
#else
    typedef long LONG_PTR;
    typedef unsigned long    ULONG_PTR;
    
    typedef int INT_PTR;
    typedef unsigned int UINT_PTR;
#endif
```
 
## 오류의 확인
* GetLastError 함수와 에러 코드   
* 콘솔에 출력하면 에러 코드가 나오고, msdn에서 해당 오류를 찾아볼 수 있다.   
 

